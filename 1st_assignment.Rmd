---
title: "第一次作业你的报告题目"
CJKmainfont: Songti SC
author: "your name"
date: "`r Sys.Date()`"
output:
  pdf_document:
    latex_engine: xelatex
  word_document:
    toc: yes
  html_document:
    code_folding: show
    fig_caption: yes
    fig_width: 10
    highlight: tango
    number_sections: yes
    theme: cosmo
    toc: yes
---
```{r setup, include = FALSE,echo = FALSE}
knitr::opts_chunk$set(echo = FALSE,error = FALSE, warning = FALSE, message = FALSE,
                      out.width = "100%", split = FALSE, fig.align = "center")
#load library
library(tidyverse)
library(kableExtra)
library(lubridate)
library(scales)
library(plotly)
library(patchwork)
library(ggrepel)
```

# 你的主要发现

1. 发现1
中商宿舍房价最高。
2. 发现2
阳逻地区平均房价最低。
3. 发现3
绝大部分的房子朝南。

# 数据介绍

本报告**链家**数据获取方式如下：
    
报告人在2023年9月12日获取了[链家武汉二手房网站](https://wh.lianjia.com/ershoufang/)数据。
    
- 链家二手房网站默认显示100页，每页30套房产，因此本数据包括3000套房产信息；
    
- 数据包括了页面可见部分的文本信息，具体字段及说明见作业说明。

 **说明：**数据仅用于教学；由于不清楚链家数据的展示规则，因此数据可能并不是武汉二手房市场的随机抽样，结论很可能有很大的偏差，甚至可能是错误的。
    
```{r}
# 载入数据和预处理

lj<- read_csv("/Users/jameschen/Documents/02_Teaching/12_quantitative_thinking_R/data/2023-09-12_cleaned.csv")
# EDA ---------------------------------------------------------------------

## 如下语句可以解决画图中的中文显示问题，当然你可以用showtext包来解决

theme_set(theme(text = element_text(family="Songti SC",size = 10))) #这里family设置成你系统中的中文字体名。

# 做一些数据预处理，比如把字符型变成factor。

```

# 数据概览

数据表（lj)共包括`r names(lj)`等`r ncol(lj)`个变量,共`r nrow(lj)`行。表的前10行示例如下：

```{r}
lj %>% 
  head(10) %>%
  kable(caption = "武汉链家二手房") %>% 
  kable_styling()
```

各变量的简短信息：
```{r}
glimpse(lj)
```

各变量的简短统计：
```{r}
summary(lj)
```

可以看到：

- 直观结论1
中北路房子的平均每平米房价最高，阳逻房子的平均每平米房价最低。
```{r}
#分析各区域的房产均价
junjia <- lj %>%
  group_by(property_region) %>%
  summarise(avg_price_sqm = mean(price_sqm, na.rm = TRUE)) %>%
  arrange(desc(avg_price_sqm))
print(junjia)
```
- 直观结论2
汉口北房子的平均面积最大，古田房子的平均面积最小。
```{r}
#分析各区域的房产房产平均面积
mianji <- lj %>%
  group_by(property_region) %>%
  summarise(avg_building_area = mean(building_area, na.rm = TRUE)) %>%
  arrange(desc(avg_building_area))
print(mianji)
```
- ...

# 探索性分析
##1、每平米房价分析
```{r}
install.packages("ggplot2") 
library(ggplot2)
ggplot(df, aes(x = price_sqm)) +
  geom_histogram(binwidth = 60, fill = "blue", ) +
  labs(title = "每平米房价直方图", x = "每平米房价", y = "房源数量")
```
发现：

- 每平米房价直方图，房价的分布不均匀，存在许多离散的尖峰，这可能表明数据中有许多异常值或极端值。

- 大部分的房价集中在较低的区间，随着价格的增加，房源数量逐渐减少。这种分布可能表明市场上大多数房产的价格相对较低，而高价位的房产数量相对较少。

## 变量2的数值描述与图形
##1、房产总价与房产总面积直接的关系
```{r}
ggplot(lj, aes(x=building_area, y=price_ttl)) +
  geom_point(color="blue",size=0.2) +geom_smooth(mapping=aes(x=building_area, y=price_ttl))+##散点图+回归线
   labs(title="房产总价与总面积的关系", x="总面积", y="房产总价")
```

发现：

- 从图中可以看出，房产总价随着总面积的增加而增加，这表明两者之间存在正相关关系。图中还绘制了一条蓝色的回归线，表示房产总价与总面积之间的线性趋势。回归线周围的灰色区域表示置信区间，反映了回归线的不确定性。

- 这张图表明房产的总面积越大，其总价也越高，这是房地产市场的一个常见现象。

## 变量...的数值描述与图形

发现：

- 发现1

- 发现2

## 探索问题1

发现：

- 发现1

- 发现2

## 探索问题2

发现：

- 发现1

- 发现2

## 探索问题3

发现：

- 发现1

- 发现2

---

# 发现总结

用1-3段话总结你的发现。



